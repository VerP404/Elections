{% extends 'admin/base.html' %}

{% load i18n %}

{% block breadcrumbs %}{% endblock %}

{% block title %}
    {% if subtitle %}
        {{ subtitle }} |
    {% endif %}
    {{ title }} | {{ site_title|default:_('Django site admin') }}
{% endblock %}

{% block branding %}
    {% include "unfold/helpers/site_branding.html" %}
{% endblock %}

{% block content %}
<div class="dashboard-container">
    <!-- –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è -->
    <div class="welcome-section">
        <h1 class="welcome-title">–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, {{ user.get_full_name|default:user.username }}!</h1>
        <p class="welcome-subtitle">
            {% if user.is_superuser or user.role == 'admin' %}
                –ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ - –ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º –¥–∞–Ω–Ω—ã–º
            {% elif user.role == 'brigadier' %}
                –ü–∞–Ω–µ–ª—å –±—Ä–∏–≥–∞–¥–∏—Ä–∞ - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–≥–∏—Ç–∞—Ç–æ—Ä–∞–º–∏ –∏ –∏—Ö –∏–∑–±–∏—Ä–∞—Ç–µ–ª—è–º–∏
            {% elif user.role == 'agitator' %}
                –ü–∞–Ω–µ–ª—å –∞–≥–∏—Ç–∞—Ç–æ—Ä–∞ - –≤–∞—à–∏ —Å–æ–∑–¥–∞–Ω–Ω—ã–µ –∏–∑–±–∏—Ä–∞—Ç–µ–ª–∏
            {% else %}
                –í–∞—à–∞ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–∞—è –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
            {% endif %}
        </p>
    </div>

    <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è -->
    <div class="stats-grid">
        <!-- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–∑–±–∏—Ä–∞—Ç–µ–ª–µ–π -->
        <div class="stat-card">
            <div class="stat-icon">
                {% if user.is_superuser or user.role == 'admin' %}
                    üë•
                {% elif user.role == 'brigadier' %}
                    üë®‚Äçüë©‚Äçüëß‚Äçüë¶
                {% else %}
                    üë§
                {% endif %}
            </div>
            <div class="stat-content">
                <h3 class="stat-title">
                    {% if user.is_superuser or user.role == 'admin' %}
                        –í—Å–µ–≥–æ –∏–∑–±–∏—Ä–∞—Ç–µ–ª–µ–π
                    {% elif user.role == 'brigadier' %}
                        –ò–∑–±–∏—Ä–∞—Ç–µ–ª–∏ –∞–≥–∏—Ç–∞—Ç–æ—Ä–æ–≤
                    {% else %}
                        –°–æ–∑–¥–∞–Ω–Ω—ã–µ –∏–∑–±–∏—Ä–∞—Ç–µ–ª–∏
                    {% endif %}
                </h3>
                <div class="stat-value">{{ user_stats.voters_created }}</div>
                <div class="stat-progress">
                    <div class="progress-bar" style="width: {{ user_stats.voters_percentage }}%"></div>
                </div>
                <p class="stat-description">{{ user_stats.voters_percentage }}% –æ—Ç –æ–±—â–µ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞</p>
            </div>
        </div>

        <!-- –ü—Ä–æ–≥–æ–ª–æ—Å–æ–≤–∞–≤—à–∏–µ –∏–∑–±–∏—Ä–∞—Ç–µ–ª–∏ -->
        <div class="stat-card">
            <div class="stat-icon">‚úÖ</div>
            <div class="stat-content">
                <h3 class="stat-title">–ü—Ä–æ–≥–æ–ª–æ—Å–æ–≤–∞–ª–∏</h3>
                <div class="stat-value">{{ user_stats.voters_voted }}</div>
                <div class="stat-progress">
                    <div class="progress-bar voted" style="width: {{ user_stats.efficiency }}%"></div>
                </div>
                <p class="stat-description">{{ user_stats.efficiency }}% –æ—Ç –≤–∞—à–∏—Ö –∏–∑–±–∏—Ä–∞—Ç–µ–ª–µ–π</p>
            </div>
        </div>

        <!-- –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å -->
        <div class="stat-card">
            <div class="stat-icon">üìä</div>
            <div class="stat-content">
                <h3 class="stat-title">–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å</h3>
                <div class="stat-value">{{ user_stats.efficiency }}%</div>
                <div class="stat-progress">
                    <div class="progress-bar efficiency" style="width: {{ user_stats.efficiency }}%"></div>
                </div>
                <p class="stat-description">–ü—Ä–æ—Ü–µ–Ω—Ç –ø—Ä–æ–≥–æ–ª–æ—Å–æ–≤–∞–≤—à–∏—Ö</p>
            </div>
        </div>
    </div>

    <!-- –ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è -->
    <div class="quick-actions">
        <h2>–ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è</h2>
        <div class="actions-grid">
            <a href="/admin/elections/voter/add/" class="action-card">
                <div class="action-icon">‚ûï</div>
                <h3>–î–æ–±–∞–≤–∏—Ç—å –∏–∑–±–∏—Ä–∞—Ç–µ–ª—è</h3>
                <p>–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –∑–∞–ø–∏—Å—å –∏–∑–±–∏—Ä–∞—Ç–µ–ª—è</p>
            </a>
            <a href="/admin/elections/voter/" class="action-card">
                <div class="action-icon">üë•</div>
                <h3>
                    {% if user.is_superuser or user.role == 'admin' %}
                        –í—Å–µ –∏–∑–±–∏—Ä–∞—Ç–µ–ª–∏
                    {% elif user.role == 'brigadier' %}
                        –ò–∑–±–∏—Ä–∞—Ç–µ–ª–∏ –∞–≥–∏—Ç–∞—Ç–æ—Ä–æ–≤
                    {% else %}
                        –ú–æ–∏ –∏–∑–±–∏—Ä–∞—Ç–µ–ª–∏
                    {% endif %}
                </h3>
                <p>–ü—Ä–æ—Å–º–æ—Ç—Ä –∑–∞–ø–∏—Å–µ–π –∏–∑–±–∏—Ä–∞—Ç–µ–ª–µ–π</p>
            </a>
            <a href="/dashboard/" class="action-card">
                <div class="action-icon">üìà</div>
                <h3>–î–∞—à–±–æ—Ä–¥</h3>
                <p>–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ –≥—Ä–∞—Ñ–∏–∫–∏</p>
            </a>
            {% if user.is_superuser or user.role == 'admin' %}
            <a href="/admin/elections/user/" class="action-card">
                <div class="action-icon">üë§</div>
                <h3>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏</h3>
                <p>–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã</p>
            </a>
            {% endif %}
            {% if user.role == 'brigadier' %}
            <a href="/admin/elections/user/?role__exact=agitator&brigadier__id__exact={{ user.id }}" class="action-card">
                <div class="action-icon">üë®‚Äçüíº</div>
                <h3>–ú–æ–∏ –∞–≥–∏—Ç–∞—Ç–æ—Ä—ã</h3>
                <p>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–≥–∏—Ç–∞—Ç–æ—Ä–∞–º–∏</p>
            </a>
            {% endif %}
        </div>
    </div>
</div>

<style>
.dashboard-container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 20px;
}

.welcome-section {
    text-align: center;
    margin-bottom: 40px;
    padding: 30px;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    border-radius: 12px;
    color: white;
}

.welcome-title {
    font-size: 2.5rem;
    margin: 0 0 10px 0;
    font-weight: 600;
}

.welcome-subtitle {
    font-size: 1.2rem;
    margin: 0;
    opacity: 0.9;
}

.stats-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 20px;
    margin-bottom: 40px;
}

.stat-card {
    background: white;
    border-radius: 12px;
    padding: 24px;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    border: 1px solid #e5e7eb;
    display: flex;
    align-items: center;
    transition: transform 0.2s, box-shadow 0.2s;
}

.stat-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
}

.stat-icon {
    font-size: 2.5rem;
    margin-right: 20px;
    min-width: 60px;
    text-align: center;
}

.stat-content {
    flex: 1;
}

.stat-title {
    font-size: 1rem;
    color: #6b7280;
    margin: 0 0 8px 0;
    font-weight: 500;
}

.stat-value {
    font-size: 2.5rem;
    font-weight: 700;
    color: #1f2937;
    margin: 0 0 12px 0;
}

.stat-progress {
    height: 8px;
    background: #f3f4f6;
    border-radius: 4px;
    margin: 0 0 8px 0;
    overflow: hidden;
}

.progress-bar {
    height: 100%;
    background: linear-gradient(90deg, #3b82f6, #1d4ed8);
    border-radius: 4px;
    transition: width 0.3s ease;
}

.progress-bar.voted {
    background: linear-gradient(90deg, #10b981, #059669);
}

.progress-bar.efficiency {
    background: linear-gradient(90deg, #8b5cf6, #7c3aed);
}

.stat-description {
    font-size: 0.875rem;
    color: #6b7280;
    margin: 0;
}

.quick-actions {
    margin-top: 40px;
}

.quick-actions h2 {
    font-size: 1.5rem;
    color: #1f2937;
    margin: 0 0 20px 0;
    font-weight: 600;
}

.actions-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 20px;
}

.action-card {
    background: white;
    border-radius: 12px;
    padding: 24px;
    text-decoration: none;
    color: inherit;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    border: 1px solid #e5e7eb;
    transition: transform 0.2s, box-shadow 0.2s;
    text-align: center;
}

.action-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
    text-decoration: none;
    color: inherit;
}

.action-icon {
    font-size: 2rem;
    margin-bottom: 12px;
}

.action-card h3 {
    font-size: 1.1rem;
    margin: 0 0 8px 0;
    color: #1f2937;
    font-weight: 600;
}

.action-card p {
    font-size: 0.875rem;
    color: #6b7280;
    margin: 0;
}

@media (max-width: 768px) {
    .stats-grid {
        grid-template-columns: 1fr;
    }
    
    .actions-grid {
        grid-template-columns: 1fr;
    }
    
    .welcome-title {
        font-size: 2rem;
    }
    
    .stat-value {
        font-size: 2rem;
    }
}
</style>
{% endblock %} 