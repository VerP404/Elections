# Инструкции по импорту пользователей и мест работы

## Импорт пользователей

### 1. Генерация шаблона Excel
```bash
python manage.py generate_user_template --output user_template.xlsx
```

### 2. Заполнение шаблона
Откройте созданный файл `user_template.xlsx` и заполните данные:

**Обязательные поля:**
- **Логин** - уникальный логин пользователя (например: ivanov_ai)
- **Фамилия** - фамилия пользователя
- **Имя** - имя пользователя  
- **Отчество** - отчество пользователя
- **Телефон** - в формате 8XXXXXXXXXX (11 цифр)

**Необязательные поля:**
- **Email** - электронная почта
- **Роль** - одна из: `admin`, `brigadier`, `agitator`, `operator`, `analyst`
- **Место работы** - название из справочника мест работы
- **Активный участник** - `True`/`False` (по умолчанию `True`)
- **Активен** - `True`/`False` (по умолчанию `True`)

**Примечания:**
- Поле **ID** оставьте пустым для новых записей
- Поле **Дата создания** оставьте пустым
- Пароль по умолчанию: `password123` (пользователь должен сменить при первом входе)

### 3. Импорт через админку
1. Зайдите в админку Django
2. Перейдите в раздел "Пользователи"
3. Нажмите кнопку "Импорт"
4. Выберите заполненный Excel файл
5. Нажмите "Отправить"

## Импорт мест работы

### 1. Генерация шаблона Excel
```bash
python manage.py generate_workplace_template --output workplace_template.xlsx
```

### 2. Заполнение шаблона
Откройте созданный файл `workplace_template.xlsx` и заполните данные:

**Обязательные поля:**
- **Название организации** - уникальное название организации

**Необязательные поля:**
- **Группа** - одна из: `medicine`, `education`, `social_protection`, `agitators`, `other`

### 3. Импорт через админку
1. Зайдите в админку Django
2. Перейдите в раздел "Места работы"
3. Нажмите кнопку "Импорт"
4. Выберите заполненный Excel файл
5. Нажмите "Отправить"

## Импорт УИК

### 1. Генерация шаблона Excel
```bash
python manage.py generate_uik_template --output uik_template.xlsx
```

### 2. Заполнение шаблона
Откройте созданный файл `uik_template.xlsx` и заполните данные:

**Обязательные поля:**
- **Номер УИК** - уникальный номер участка
- **Адрес** - полный адрес участка

**Необязательные поля:**
- **Плановое количество избирателей** - ожидаемое количество
- **Бригадир** - ID или логин бригадира (должен существовать в системе)
- **Агитаторы** - ID или логины агитаторов через запятую (должны существовать в системе)

### 3. Импорт через админку
1. Зайдите в админку Django
2. Перейдите в раздел "УИК"
3. Нажмите кнопку "Импорт"
4. Выберите заполненный Excel файл
5. Нажмите "Отправить"

## Примеры данных

### Пользователи
```
Логин,Фамилия,Имя,Отчество,Телефон,Email,Роль,Место работы,Активный участник,Активен
ivanov_ai,Иванов,Иван,Иванович,81234567890,ivanov@example.com,agitator,Больница №1,True,True
petrov_br,Петров,Петр,Петрович,81234567891,petrov@example.com,brigadier,Школа №5,True,True
smirnov_op,Смирнов,Алексей,Сергеевич,81234567892,smirnov@example.com,operator,Университет,True,True
```

### Места работы
```
Название организации,Группа
Больница №1,medicine
Школа №5,education
Университет,education
Центр социальной защиты,social_protection
```

### УИК
```
Номер УИК,Адрес,Плановое количество избирателей,Бригадир,Агитаторы
1001,ул. Ленина, 1,500,brigadier1,"agitator1,agitator2"
1002,ул. Пушкина, 5,300,2,"3,4,5"
1003,пр. Мира, 10,400,brigadier3,"agitator6,agitator7,agitator8"
```

**Важно:** В колонке "Группа" используйте английские коды:
- `medicine` = Медицина
- `education` = Образование  
- `social_protection` = Соцзащита
- `agitators` = Агитаторы
- `other` = Прочие

## Валидация данных

Система автоматически проверяет:
- Уникальность логинов
- Формат телефонов (8XXXXXXXXXX)
- Корректность ролей
- Обязательность полей

При ошибках импорт будет остановлен с указанием проблемных строк.

## Экспорт данных

Для экспорта существующих данных:
1. Зайдите в нужный раздел админки
2. Нажмите кнопку "Экспорт"
3. Выберите формат (Excel или CSV)
4. Скачайте файл

Экспортированные данные можно использовать как шаблон для импорта.
